import{c as N,r as s,j as a,L as z}from"./index-Cos0Ga36.js";import{c as S,u as F,b as ne}from"./cn-Chsm3e16.js";import{j as se,o as ae,c as ie,g as B,b as ce,a as le,R as ue,A as de,d as w,P as W,e as fe,h as pe,D as he,C as me,i as xe}from"./useFilterQuery-B3mKod8A.js";import{P as V,u as ge,a as ve}from"./githubApiStore-D8e3-Ctp.js";import{u as ye}from"./useTargetRepository-BQi8M3h_.js";import{g as Te,a as we,b as be}from"./randomMessages-H81L9F6i.js";import"./react-BR5ReH7I.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M6 3v12",key:"qpgusn"}],["path",{d:"M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"1d02ji"}],["path",{d:"M6 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",key:"chk6ph"}],["path",{d:"M15 6a9 9 0 0 0-9 9",key:"or332x"}],["path",{d:"M18 15v6",key:"9wciyi"}],["path",{d:"M21 18h-6",key:"139f0c"}]],je=N("GitBranchPlus",Ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Re=N("Image",Ee);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ke=N("LoaderCircle",Pe);function M({provider:e,className:t,children:r,...o}){const{title:n,description:i,footer:c}=s.useMemo(e,[e]);return a.jsxs("div",{className:S("flex flex-col items-center max-w-md mx-auto p-6 space-y-4 text-center text-foreground",t),...o,children:[a.jsx("h2",{className:"text-2xl font-bold",children:n}),a.jsx("p",{className:"text-lg",children:i}),a.jsx("p",{className:"text-lg italic",children:c}),r]})}function Le(e){const[t,r]=s.useState(0);return s.useEffect(()=>se(e.current,o=>{r(o.intersectionRect.height)},{root:null,threshold:Array.from({length:101},(o,n)=>n/100)}),[e]),t}function Me(e){const[t,r]=s.useState(0);return s.useEffect(()=>{const o=()=>{if(e.current){const{top:n}=e.current.getBoundingClientRect();r(Math.max(0,-n))}};return window.addEventListener("scroll",o),o(),()=>window.removeEventListener("scroll",o)},[e]),t}function _e(e,t,r,o,n,i,c){const u=o+n,l=Math.ceil(e/t),p=Math.floor(i/u),d=Math.ceil(r/u)+1,h=l*u-n,v=Math.max(0,p-c),f=Math.min(l,p+d+c),m=v*t,x=Math.min(e,f*t),g=Array.from({length:x-m},(T,y)=>m+y);return{totalHeight:h,offsetTop:v*u,visibleIndexs:g}}function Ie(e,t,r){const[o,n]=s.useState(0);return s.useEffect(()=>ae(e.current,i=>{const{width:c}=i.contentRect,u=(c-r*(t-1))/t;n(u)}),[e,t,r]),o}function Ne({items:e,columnCount:t,overscan:r=0,gap:o=10,render:n,className:i}){const c=s.useRef(null),u=s.useRef(null),l=Le(c),p=Me(c),d=Ie(u,t,o),{totalHeight:h,offsetTop:v,visibleIndexs:f}=_e(e.length,t,l,d,o,p,r);return a.jsx("div",{ref:c,className:S("relative w-full",i),style:{paddingTop:v,height:h},children:a.jsx("div",{ref:u,className:"flex flex-wrap items-start",style:{gap:o},children:f.map(m=>a.jsx("div",{style:{flexBasis:`calc(100% / ${t} - ${o}px)`},children:n({index:m,item:e[m]})},m))})})}var Se="VisuallyHidden",q=s.forwardRef((e,t)=>a.jsx(V.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));q.displayName=Se;var De=q,[P,gt]=ie("Tooltip",[B]),k=B(),U="TooltipProvider",Ae=700,_="tooltip.open",[Oe,D]=P(U),Y=e=>{const{__scopeTooltip:t,delayDuration:r=Ae,skipDelayDuration:o=300,disableHoverableContent:n=!1,children:i}=e,[c,u]=s.useState(!0),l=s.useRef(!1),p=s.useRef(0);return s.useEffect(()=>{const d=p.current;return()=>window.clearTimeout(d)},[]),a.jsx(Oe,{scope:t,isOpenDelayed:c,delayDuration:r,onOpen:s.useCallback(()=>{window.clearTimeout(p.current),u(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>u(!0),o)},[o]),isPointerInTransitRef:l,onPointerInTransitChange:s.useCallback(d=>{l.current=d},[]),disableHoverableContent:n,children:i})};Y.displayName=U;var L="Tooltip",[He,R]=P(L),Z=e=>{const{__scopeTooltip:t,children:r,open:o,defaultOpen:n=!1,onOpenChange:i,disableHoverableContent:c,delayDuration:u}=e,l=D(L,e.__scopeTooltip),p=k(t),[d,h]=s.useState(null),v=ce(),f=s.useRef(0),m=c??l.disableHoverableContent,x=u??l.delayDuration,g=s.useRef(!1),[T=!1,y]=le({prop:o,defaultProp:n,onChange:H=>{H?(l.onOpen(),document.dispatchEvent(new CustomEvent(_))):l.onClose(),i==null||i(H)}}),C=s.useMemo(()=>T?g.current?"delayed-open":"instant-open":"closed",[T]),j=s.useCallback(()=>{window.clearTimeout(f.current),f.current=0,g.current=!1,y(!0)},[y]),E=s.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y(!1)},[y]),O=s.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{g.current=!0,y(!0),f.current=0},x)},[x,y]);return s.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),a.jsx(ue,{...p,children:a.jsx(He,{scope:t,contentId:v,open:T,stateAttribute:C,trigger:d,onTriggerChange:h,onTriggerEnter:s.useCallback(()=>{l.isOpenDelayed?O():j()},[l.isOpenDelayed,O,j]),onTriggerLeave:s.useCallback(()=>{m?E():(window.clearTimeout(f.current),f.current=0)},[E,m]),onOpen:j,onClose:E,disableHoverableContent:m,children:r})})};Z.displayName=L;var I="TooltipTrigger",X=s.forwardRef((e,t)=>{const{__scopeTooltip:r,...o}=e,n=R(I,r),i=D(I,r),c=k(r),u=s.useRef(null),l=F(t,u,n.onTriggerChange),p=s.useRef(!1),d=s.useRef(!1),h=s.useCallback(()=>p.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(de,{asChild:!0,...c,children:a.jsx(V.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...o,ref:l,onPointerMove:w(e.onPointerMove,v=>{v.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),d.current=!0)}),onPointerLeave:w(e.onPointerLeave,()=>{n.onTriggerLeave(),d.current=!1}),onPointerDown:w(e.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:w(e.onFocus,()=>{p.current||n.onOpen()}),onBlur:w(e.onBlur,n.onClose),onClick:w(e.onClick,n.onClose)})})});X.displayName=I;var A="TooltipPortal",[ze,Ge]=P(A,{forceMount:void 0}),K=e=>{const{__scopeTooltip:t,forceMount:r,children:o,container:n}=e,i=R(A,t);return a.jsx(ze,{scope:t,forceMount:r,children:a.jsx(W,{present:r||i.open,children:a.jsx(fe,{asChild:!0,container:n,children:o})})})};K.displayName=A;var b="TooltipContent",Q=s.forwardRef((e,t)=>{const r=Ge(b,e.__scopeTooltip),{forceMount:o=r.forceMount,side:n="top",...i}=e,c=R(b,e.__scopeTooltip);return a.jsx(W,{present:o||c.open,children:c.disableHoverableContent?a.jsx(J,{side:n,...i,ref:t}):a.jsx($e,{side:n,...i,ref:t})})}),$e=s.forwardRef((e,t)=>{const r=R(b,e.__scopeTooltip),o=D(b,e.__scopeTooltip),n=s.useRef(null),i=F(t,n),[c,u]=s.useState(null),{trigger:l,onClose:p}=r,d=n.current,{onPointerInTransitChange:h}=o,v=s.useCallback(()=>{u(null),h(!1)},[h]),f=s.useCallback((m,x)=>{const g=m.currentTarget,T={x:m.clientX,y:m.clientY},y=We(T,g.getBoundingClientRect()),C=Ve(T,y),j=qe(x.getBoundingClientRect()),E=Ye([...C,...j]);u(E),h(!0)},[h]);return s.useEffect(()=>()=>v(),[v]),s.useEffect(()=>{if(l&&d){const m=g=>f(g,d),x=g=>f(g,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",x)}}},[l,d,f,v]),s.useEffect(()=>{if(c){const m=x=>{const g=x.target,T={x:x.clientX,y:x.clientY},y=(l==null?void 0:l.contains(g))||(d==null?void 0:d.contains(g)),C=!Ue(T,c);y?v():C&&(v(),p())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,c,p,v]),a.jsx(J,{...e,ref:i})}),[Fe,Be]=P(L,{isInside:!1}),J=s.forwardRef((e,t)=>{const{__scopeTooltip:r,children:o,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:c,...u}=e,l=R(b,r),p=k(r),{onClose:d}=l;return s.useEffect(()=>(document.addEventListener(_,d),()=>document.removeEventListener(_,d)),[d]),s.useEffect(()=>{if(l.trigger){const h=v=>{const f=v.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),a.jsx(he,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(me,{"data-state":l.stateAttribute,...p,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(ne,{children:o}),a.jsx(Fe,{scope:r,isInside:!0,children:a.jsx(De,{id:l.contentId,role:"tooltip",children:n||o})})]})})});Q.displayName=b;var ee="TooltipArrow",te=s.forwardRef((e,t)=>{const{__scopeTooltip:r,...o}=e,n=k(r);return Be(ee,r).isInside?null:a.jsx(pe,{...n,...o,ref:t})});te.displayName=ee;function We(e,t){const r=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,o,n,i)){case i:return"left";case n:return"right";case r:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Ve(e,t,r=5){const o=[];switch(t){case"top":o.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":o.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":o.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":o.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return o}function qe(e){const{top:t,right:r,bottom:o,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:o},{x:n,y:o}]}function Ue(e,t){const{x:r,y:o}=e;let n=!1;for(let i=0,c=t.length-1;i<t.length;c=i++){const u=t[i].x,l=t[i].y,p=t[c].x,d=t[c].y;l>o!=d>o&&r<(p-u)*(o-l)/(d-l)+u&&(n=!n)}return n}function Ye(e){const t=e.slice();return t.sort((r,o)=>r.x<o.x?-1:r.x>o.x?1:r.y<o.y?-1:r.y>o.y?1:0),Ze(t)}function Ze(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const n=e[o];for(;t.length>=2;){const i=t[t.length-1],c=t[t.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))t.pop();else break}t.push(n)}t.pop();const r=[];for(let o=e.length-1;o>=0;o--){const n=e[o];for(;r.length>=2;){const i=r[r.length-1],c=r[r.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))r.pop();else break}r.push(n)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Xe=Y,Ke=Z,Qe=X,Je=K,et=Q,tt=te;function re({delayDuration:e=0,...t}){return a.jsx(Xe,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function rt({...e}){return a.jsx(re,{children:a.jsx(Ke,{"data-slot":"tooltip",...e})})}function ot({...e}){return a.jsx(Qe,{"data-slot":"tooltip-trigger",...e})}function nt({className:e,sideOffset:t=4,children:r,...o}){return a.jsx(Je,{children:a.jsxs(et,{"data-slot":"tooltip-content",sideOffset:t,className:S("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-w-sm rounded-md px-3 py-1.5 text-xs",e),...o,children:[r,a.jsx(tt,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function G({owner:e,repo:t,ref:r,path:o}){const[n,i]=s.useState(!1),c=s.useCallback(()=>{i(!1)},[]);return s.useEffect(()=>{i(!0)},[o]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"size-full opacity-5 ring-muted-foreground ring-1 rounded-md p-10",style:{display:n?"block":"none"},children:a.jsx(ke,{className:"size-full object-contain text-muted animate-spin duration-[3s]"})}),a.jsx("img",{src:`https://raw.githubusercontent.com/${e}/${t}/${r}/${o}`,alt:o,className:"size-full object-contain",onLoad:c,style:{display:n?"none":"block"}})]})}const st=s.memo(function({owner:t,repo:r,ref:o,path:n}){return"ontouchstart"in window||navigator.maxTouchPoints>0?a.jsx("div",{className:"aspect-square size-full ring-foreground transition-all active:ring-2 active:rounded-xs",children:a.jsx(G,{owner:t,repo:r,ref:o,path:n})}):a.jsx(re,{children:a.jsxs(rt,{children:[a.jsx(ot,{className:"aspect-square size-full ring-foreground transition-all hover:ring-2 hover:rounded-xs",children:a.jsx(G,{owner:t,repo:r,ref:o,path:n})}),a.jsx(nt,{side:"bottom",sticky:"partial",className:"min-w-fit p-2 rounded-md bg-card text-card-foreground ring-1 ring-muted-foreground",children:a.jsx("p",{className:"px-2 py-1",children:n})})]})},n)});function oe(e){const t=s.useRef(null),r=ge(n=>n.setRateLimit),o=ve(n=>n.githubToken);return s.useEffect(()=>(t.current=new Worker(e,{type:"module"}),()=>{var n;return(n=t.current)==null?void 0:n.terminate()}),[e]),s.useCallback(async n=>{if(!t.current)throw new Error("Worker not initialized");return new Promise((i,c)=>{t.current&&(t.current.onmessage=u=>{if(u.data.error){c(new Error(u.data.error));return}u.data.rateLimit&&r(u.data.rateLimit.limit,u.data.rateLimit.remaining),u.data.data!==void 0&&i(u.data.data)},t.current.postMessage({...n,token:o}))})},[o,r])}const at="/assets/defaultBranchWorker-CLnDuH2n.js";function it(){const e=String(new URL(at,import.meta.url));return oe(e)}const ct="/assets/imageFileTreeWorker-CZ0tqoNa.js";function lt(){const e=String(new URL(ct,import.meta.url));return oe(e)}function $(e){const[t,r]=s.useState(!1),o=s.useCallback(async(...n)=>{r(!0);try{return await e(...n)}finally{r(!1)}},[e]);return[t,o]}function vt(){const[{owner:e,repo:t,ref:r},o]=ye(),[n,i]=$(it()),[c,u]=$(lt()),[l,p]=s.useState(null),[d]=xe(),h=s.useMemo(()=>d.split(" ").filter(Boolean),[d]),v=s.useMemo(()=>{const g=Math.floor(window.innerWidth/64);return Math.max(2,Math.min(g,15))},[]);s.useEffect(()=>{e&&t&&!r?i({owner:e,repo:t}).then(x=>o(e,t,x)).catch(console.error):u({owner:e,repo:t,ref:r}).then(x=>p(x)).catch(console.error)},[e,t,r,i,o,u]);const f=s.useMemo(()=>l==null?void 0:l.filter(g=>h.reduce((T,y)=>!T||!y?T:y.startsWith("-")?!g.includes(y.slice(1)):g.includes(y),!0)),[l,h]),m=s.useCallback(({index:x,item:g})=>a.jsx(st,{owner:e,repo:t,ref:r,path:g},x),[e,t,r]);return n?a.jsx(M,{provider:Te,children:a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8 text-lg",children:[a.jsx(je,{}),"loading default branch...",a.jsx(z,{className:"animate-spin"})]})}):c?a.jsx(M,{provider:we,children:a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8 text-lg",children:[a.jsx(Re,{}),"loading images...",a.jsx(z,{className:"animate-spin"})]})}):!f||!f.length?a.jsx(M,{provider:be}):a.jsx(Ne,{items:f,columnCount:v,overscan:5,gap:10,render:m})}export{vt as default};
